<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda - Legado San Jos√©</title>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JT5P73Z3EV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-JT5P73Z3EV');
    </script>

    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="productos.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">
                    <h1>LEGADO SAN JOS√â</h1>
                </a>
            </div>

            <div class="menu-toggle" id="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <ul class="nav-menu">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="productos.html" class="active">Productos</a></li>
                <li><a href="index.html#nosotros">Nosotros</a></li>
                <li><a href="index.html#contacto">Contacto</a></li>
            </ul>

            <div class="nav-cart" id="cart-toggle">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                <span class="cart-count" id="cart-count">0</span>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>

    <!-- Shop Header -->
    <section class="shop-header">
        <div class="container">
            <h1 class="shop-title">Nuestra Tienda</h1>
            <p class="shop-subtitle">Descubre nuestra colecci√≥n exclusiva de productos premium</p>
        </div>
    </section>

    <!-- Products Section -->
    <section class="shop-section">
        <div class="container">
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">Todos</button>
                <button class="filter-btn" data-filter="gorras">Gorras</button>
                <button class="filter-btn" data-filter="playeras">Playeras</button>
                <button class="filter-btn" data-filter="mochilas">Mochilas</button>
                <button class="filter-btn" data-filter="maletas">Maletas</button>
            </div>

            <div class="products-grid" id="products-grid">
                <!-- Products will be dynamically loaded here -->
            </div>
        </div>
    </section>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h2>Carrito de Compras</h2>
            <button class="cart-close" id="cart-close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- Cart items will be dynamically added here -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cart-total">$0 MXN</span>
            </div>

            <div class="promo-code-section" style="margin-bottom: 15px;">
                <input type="text" id="internal-code" placeholder="C√≥digo Interno (Opcional)"
                    style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 5px;">
                <small style="color: #666; font-size: 0.8em;">Solo para personal autorizado</small>
            </div>

            <button class="checkout-btn" id="checkout-btn">Proceder al Pago</button>
        </div>
    </div>

    <!-- Product Modal -->
    <div class="product-modal" id="product-modal">
        <div class="modal-overlay" id="modal-overlay"></div>
        <div class="modal-content">
            <button class="modal-close" id="modal-close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <!-- Product Details View -->
            <div class="modal-body" id="product-details-view">
                <div class="modal-image" id="modal-image"></div>
                <div class="modal-details">
                    <h2 id="modal-name"></h2>
                    <p class="modal-price" id="modal-price"></p>
                    <p class="modal-description" id="modal-description"></p>

                    <div class="product-options">
                        <div class="option-group" id="variant-group" style="display: none;">
                            <label>Color:</label>
                            <div class="variant-options" id="variant-options">
                                <!-- Variant buttons will be added dynamically -->
                            </div>
                        </div>

                        <div class="option-group" id="size-group">
                            <label>Talla:</label>
                            <div class="size-buttons" id="size-buttons">
                                <!-- Size buttons will be added dynamically -->
                            </div>
                        </div>

                        <div class="option-group">
                            <div class="modal-actions">
                                <div class="quantity-selector">
                                    <button class="qty-btn minus" id="qty-minus">-</button>
                                    <input type="number" id="quantity" value="1" min="1">
                                    <button class="qty-btn plus" id="qty-plus">+</button>
                                </div>
                                <div class="action-buttons">
                                    <button class="add-to-cart-btn" id="add-to-cart-btn">
                                        Agregar al Carrito
                                    </button>
                                    <button class="try-on-btn" onclick="openTryOn()">
                                        <span class="icon">‚ú®</span> Prueba c√≥mo se te ve
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Try-On View (Hidden by default) -->
            <!-- Try-On View (Hidden by default) -->
            <div id="try-on-view" class="try-on-content"
                style="display: none; width: 100%; padding: 30px; box-sizing: border-box; max-width: 900px;">
                <div class="try-on-header"
                    style="position: relative; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                    <button onclick="closeTryOn()"
                        style="position: absolute; left: 0; background: none; border: none; cursor: pointer; font-size: 16px; color: var(--gray-mid); display: flex; align-items: center; gap: 5px;">
                        ‚Üê Volver al producto
                    </button>
                    <h2 style="margin: 0; font-size: 24px;">Prueba c√≥mo se te ve</h2>
                </div>

                <p class="subtitle" style="margin-bottom: 30px;">Sube una foto tuya y la IA har√° el resto.</p>

                <div class="try-on-grid">
                    <!-- Left Column: Input -->
                    <div class="try-on-col input-col">
                        <div class="upload-area" onclick="document.getElementById('user-photo-input').click()">
                            <div class="upload-placeholder">
                                <span class="camera-icon">üì∏</span>
                                <p>Toca para subir tu foto</p>
                            </div>
                            <input type="file" id="user-photo-input" accept="image/*" style="display: none;"
                                onchange="handlePhotoUpload(this)">
                            <img id="user-photo-preview" src="" class="preview-image">
                        </div>

                        <button id="generate-btn" class="cta-button generate-btn" onclick="generateTryOn()"
                            style="display: none; margin-top: 20px;">
                            Generar Imagen
                        </button>
                    </div>

                    <!-- Right Column: Result -->
                    <div class="try-on-col result-col">
                        <div id="try-on-result" class="result-container placeholder-state">
                            <div id="empty-state-msg" style="color: var(--gray-mid); text-align: center;">
                                <span style="font-size: 40px; display: block; margin-bottom: 10px;">‚ú®</span>
                                <p>Aqu√≠ aparecer√° tu resultado</p>
                            </div>
                            <div id="loading-spinner" class="spinner" style="display: none;">
                                <div class="spinner-icon"></div>
                                <p id="loading-text">‚ú® Conectando con IA...</p>
                            </div>
                            <img id="generated-image" src="" class="generated-image" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer" id="contacto">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3>LEGADO SAN JOS√â</h3>
                    <p>Tradici√≥n que se viste</p>
                </div>
                <div class="footer-column">
                    <h4>Compra</h4>
                    <ul>
                        <li><a href="productos.html">Productos</a></li>
                        <li><a href="#">Tallas</a></li>
                        <li><a href="#">Env√≠os</a></li>
                        <li><a href="#">Devoluciones</a></li>
                        <li><a href="index.html#contacto">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>S√≠guenos</h4>
                    <div class="social-links">
                        <a href="https://www.facebook.com/legadosanjose" target="_blank">Facebook</a>
                        <a href="https://www.instagram.com/legado_sanjose/" target="_blank">Instagram</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Legado San Jos√©. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
    <script src="stripe-config.js"></script>
    <script src="script.js"></script>
    <script src="productos.js"></script>
</body>

</html>